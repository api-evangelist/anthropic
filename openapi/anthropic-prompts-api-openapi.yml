openapi: 3.1.0
info:
  title: Anthropic Prompt Tools API
  description: >
    The prompt tools APIs are in a closed research preview. These APIs are a set
    of tools to generate and improve prompts, similar to what's available in the
    Anthropic Workbench, and are intended for use by other prompt engineering
    platforms and playgrounds.


    **Note**: This is an experimental API that requires special access and
    doesn't have the same level of commitment to long-term support as other
    APIs.
  version: 1.0.0
  contact:
    name: Anthropic Support
    url: https://support.anthropic.com
  license:
    name: Anthropic Terms of Service
    url: https://www.anthropic.com/terms
servers:
  - url: https://api.anthropic.com
    description: Production server
security:
  - ApiKeyAuth: []
paths:
  /v1/experimental/generate_prompt:
    post:
      summary: Generate A Prompt
      description: >-
        Generate a well-written prompt for a specified task. This API creates
        prompts that can be used directly with the Messages
        API.<br><br>**Requirements:**<br>- Must have joined the closed research
        preview for prompt tools APIs<br>- Must use the API directly (not
        available in SDK)<br>- Must include the beta header
        `prompt-tools-2025-04-02`<br>
      operationId: anthropicGenerateprompt
      parameters:
        - name: anthropic-beta
          in: header
          description: >
            Optional header to specify the beta version(s) you want to use.

            To use multiple betas, use a comma separated list like `beta1,beta2`
            or specify the header multiple times for each beta.
          required: false
          schema:
            type: array
            items:
              type: string
            example:
              - prompt-tools-2025-04-02
          style: simple
          explode: false
        - name: x-api-key
          in: header
          required: true
          description: |
            A valid API token.
          schema:
            type: string
        - name: Content-Type
          in: header
          required: true
          description: |
            The content type.
          schema:
            type: string
        - name: anthropic-dangerous-direct-browser-access
          in: header
          required: true
          description: |
            Enable CORS.
          schema:
            type: string
            default: true
        - name: anthropic-version
          in: header
          required: true
          description: |
            Which version of anthropic.
          schema:
            type: string
            default: '2023-06-01'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - task
              properties:
                task:
                  type: string
                  description: >
                    Description of the prompt's purpose.

                    The `task` parameter tells Claude what the prompt should do
                    or what kind of role or functionality you want to create.
                    This helps guide the prompt generation process toward your
                    intended use case.
                  example: a chef for a meal prep planning service
                target_model:
                  type: string
                  nullable: true
                  default: null
                  description: >
                    The model this prompt will be used for. This optional
                    parameter helps us understand which models our prompt tools
                    are being used with, but it doesn't currently affect
                    functionality.
                  minLength: 1
                  maxLength: 256
                  example: claude-3-7-sonnet-20250219
            examples:
              chef_example:
                summary: Chef for meal prep service
                value:
                  task: a chef for a meal prep planning service
                  target_model: claude-3-7-sonnet-20250219
              default:
                summary: Basic task only
                value:
                  task: a helpful writing assistant for creative fiction
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                required:
                  - messages
                  - system
                  - usage
                properties:
                  messages:
                    type: array
                    description: >
                      The response contains a list of message objects in the
                      same format used by the Messages API. Typically includes a
                      user message with the complete generated prompt text, and
                      may include an assistant message with a prefill to guide
                      the model's initial response.

                      These messages can be used directly in a Messages API
                      request to start a conversation with the generated prompt.
                    items:
                      type: object
                      required:
                        - role
                        - content
                      properties:
                        role:
                          type: string
                          enum:
                            - user
                            - assistant
                          description: The role of the message sender
                        content:
                          type: array
                          description: The content of the message
                          items:
                            type: object
                            required:
                              - type
                              - text
                            properties:
                              type:
                                type: string
                                enum:
                                  - text
                                description: The type of content block
                              text:
                                type: string
                                description: The text content
                  system:
                    type: string
                    default: ''
                    description: >
                      Currently, the `system` field is always returned as an
                      empty string (""). In future iterations, this field may
                      contain generated system prompts.

                      Directions similar to what would normally be included in a
                      system prompt are included in `messages` when generating a
                      prompt.
                    example: ''
                  usage:
                    type: object
                    description: Usage information
                    required:
                      - input_tokens
                      - output_tokens
                    properties:
                      input_tokens:
                        type: integer
                        description: Number of input tokens used
                        minimum: 0
                      output_tokens:
                        type: integer
                        description: Number of output tokens generated
                        minimum: 0
              examples:
                chef_response:
                  summary: Chef prompt response
                  value:
                    messages:
                      - role: user
                        content:
                          - type: text
                            text: You are a chef for a meal prep planning service...
                      - role: assistant
                        content:
                          - type: text
                            text: <recipe_planning>
                    system: ''
                    usage:
                      input_tokens: 25
                      output_tokens: 150
        '400':
          description: Bad Request - Invalid input parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized - Invalid or missing API key
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden - Access denied or not in closed research preview
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /v1/experimental/improve_prompt:
    post:
      summary: Improve A Prompt
      description: >-
        Create a new-and-improved prompt guided by feedback. This API takes an
        existing prompt and enhances it based on provided feedback or general
        prompt engineering best practices.<br><br>**Requirements:**<br>- Must
        have joined the closed research preview for prompt tools APIs<br>- Must
        use the API directly (not available in SDK)<br>- Must include the beta
        header `prompt-tools-2025-04-02`<br>- Messages must contain only
        text-only content blocks<br>- No tool calls, images, or prompt caching
        blocks allowed<br>- Only contiguous user messages with text content are
        permitted<br>
      operationId: anthropicImproveprompt
      parameters:
        - name: anthropic-beta
          in: header
          description: >
            Optional header to specify the beta version(s) you want to use.

            To use multiple betas, use a comma separated list like `beta1,beta2`
            or specify the header multiple times for each beta.
          required: false
          schema:
            type: array
            items:
              type: string
            example:
              - prompt-tools-2025-04-02
          style: simple
          explode: false
        - name: x-api-key
          in: header
          required: true
          description: |
            A valid API token.
          schema:
            type: string
        - name: Content-Type
          in: header
          required: true
          description: |
            The content type.
          schema:
            type: string
        - name: anthropic-dangerous-direct-browser-access
          in: header
          required: true
          description: |
            Enable CORS.
          schema:
            type: string
            default: true
        - name: anthropic-version
          in: header
          required: true
          description: |
            Which version of anthropic.
          schema:
            type: string
            default: '2023-06-01'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  type: array
                  description: >
                    The prompt to improve, structured as a list of message
                    objects.

                    Each message must contain only text-only content blocks and
                    not include tool calls, images, or prompt caching blocks.

                    Only contiguous user messages with text content are allowed.
                    Assistant prefill is permitted.
                  items:
                    type: object
                    required:
                      - role
                      - content
                    properties:
                      role:
                        type: string
                        enum:
                          - user
                          - assistant
                        description: The role of the message sender
                      content:
                        type: array
                        description: The content of the message (text only)
                        items:
                          type: object
                          required:
                            - type
                            - text
                          properties:
                            type:
                              type: string
                              enum:
                                - text
                              description: Must be "text" - other content types not allowed
                            text:
                              type: string
                              description: The text content of the message
                feedback:
                  type: string
                  nullable: true
                  description: >
                    Feedback for improving the prompt.

                    Use this parameter to share specific guidance on what
                    aspects of the prompt should be enhanced or modified.

                    When not set, the API will improve the prompt using general
                    prompt engineering best practices.
                  example: Make it more detailed and include cooking times
                system:
                  type: string
                  nullable: true
                  description: >
                    The existing system prompt to incorporate, if any.

                    Note that while system prompts typically appear as separate
                    parameters in standard API calls, in the improve_prompt
                    response, the system content will be incorporated directly
                    into the returned user message.
                  example: You are a professional chef
                target_model:
                  type: string
                  nullable: true
                  default: null
                  description: >
                    The model this prompt will be used for. This optional
                    parameter helps us understand which models our prompt tools
                    are being used with, but it doesn't currently affect
                    functionality.
                  minLength: 1
                  maxLength: 256
                  example: claude-3-7-sonnet-20250219
            examples:
              default:
                summary: Simple recipe prompt improvement
                value:
                  messages:
                    - role: user
                      content:
                        - type: text
                          text: Concise recipe for {{food}}
                  feedback: Make the recipes shorter
              recipe_with_example:
                summary: Recipe prompt with example interaction
                value:
                  messages:
                    - role: user
                      content:
                        - type: text
                          text: >-
                            Concise for {{food}}.


                            example

                            mandu: Put the mandu in the air fryer at 380F for 7
                            minutes.
                  system: You are a professional meal prep chef
                  feedback: Make it more detailed and include cooking times
                  target_model: claude-3-7-sonnet-20250219
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                required:
                  - messages
                  - system
                  - usage
                properties:
                  messages:
                    type: array
                    description: >
                      Contains the result of the prompt improvement process in a
                      list of message objects.

                      Includes a user-role message with the improved prompt text
                      and may optionally include an assistant-role message with
                      a prefill. These messages follow the standard Messages API
                      format and can be used directly in subsequent API calls.
                    items:
                      type: object
                      required:
                        - role
                        - content
                      properties:
                        role:
                          type: string
                          enum:
                            - user
                            - assistant
                          description: The role of the message sender
                        content:
                          type: array
                          description: The content of the message
                          items:
                            type: object
                            required:
                              - type
                              - text
                            properties:
                              type:
                                type: string
                                enum:
                                  - text
                                description: The type of content block
                              text:
                                type: string
                                description: The text content
                  system:
                    type: string
                    description: >
                      Currently, the system field is always returned as an empty
                      string (""). In future iterations, this field may contain
                      generated system prompts.

                      Directions similar to what would normally be included in a
                      system prompt are included in messages when improving a
                      prompt.
                    example: ''
                  usage:
                    type: object
                    description: Usage information
                    required:
                      - input_tokens
                      - output_tokens
                    properties:
                      input_tokens:
                        type: integer
                        description: Number of input tokens used
                        minimum: 0
                      output_tokens:
                        type: integer
                        description: Number of output tokens generated
                        minimum: 0
              examples:
                improved_recipe_response:
                  summary: Improved recipe prompt response
                  value:
                    messages:
                      - role: user
                        content:
                          - type: text
                            text: >-
                              You are a professional meal prep chef. Create a
                              detailed recipe for {{food}} including preparation
                              time, cooking time, and step-by-step
                              instructions...
                      - role: assistant
                        content:
                          - type: text
                            text: Here's a detailed recipe for
                    system: ''
                    usage:
                      input_tokens: 45
                      output_tokens: 180
        '400':
          description: Bad Request - Invalid input parameters or unsupported content types
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized - Invalid or missing API key
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden - Access denied or not in closed research preview
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /v1/experimental/templatize_prompt:
    post:
      summary: Templatize A Prompt
      description: >-
        Templatize a prompt by identifying and extracting variables. This API
        analyzes a prompt and converts specific values into reusable template
        variables with placeholders.<br><br>**Requirements:**<br>- Must have
        joined the closed research preview for prompt tools APIs<br>- Must use
        the API directly (not available in SDK)<br>- Must include the beta
        header `prompt-tools-2025-04-02`<br>- Messages must contain only
        text-only content blocks<br>- No tool calls, images, or prompt caching
        blocks allowed<br>- Only contiguous user messages with text content are
        permitted<br>
      operationId: anthropicTemplatizeprompt
      parameters:
        - name: anthropic-beta
          in: header
          description: >
            Optional header to specify the beta version(s) you want to use.

            To use multiple betas, use a comma separated list like `beta1,beta2`
            or specify the header multiple times for each beta.
          required: false
          schema:
            type: array
            items:
              type: string
            example:
              - prompt-tools-2025-04-02
          style: simple
          explode: false
        - name: x-api-key
          in: header
          required: true
          description: |
            A valid API token.
          schema:
            type: string
        - name: Content-Type
          in: header
          required: true
          description: |
            The content type.
          schema:
            type: string
        - name: anthropic-dangerous-direct-browser-access
          in: header
          required: true
          description: |
            Enable CORS.
          schema:
            type: string
            default: true
        - name: anthropic-version
          in: header
          required: true
          description: |
            Which version of anthropic.
          schema:
            type: string
            default: '2023-06-01'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  type: array
                  description: >
                    The prompt to templatize, structured as a list of message
                    objects.

                    Each message must contain only text-only content blocks and
                    not include tool calls, images, or prompt caching blocks.

                    Only contiguous user messages with text content are allowed.
                    Assistant prefill is permitted.
                  items:
                    type: object
                    required:
                      - role
                      - content
                    properties:
                      role:
                        type: string
                        enum:
                          - user
                          - assistant
                        description: The role of the message sender
                      content:
                        type: array
                        description: The content of the message (text only)
                        items:
                          type: object
                          required:
                            - type
                            - text
                          properties:
                            type:
                              type: string
                              enum:
                                - text
                              description: Must be "text" - other content types not allowed
                            text:
                              type: string
                              description: The text content of the message
                system:
                  type: string
                  nullable: true
                  description: >
                    The existing system prompt to templatize.

                    Note that this differs from the Messages API; it is strictly
                    a string.

                    If provided, variables will be identified and replaced in
                    the system prompt as well.
                  example: You are a professional English to German translator
            examples:
              default:
                summary: Simple translation prompt
                value:
                  messages:
                    - role: user
                      content:
                        - type: text
                          text: Translate hello to German
              translation_with_system:
                summary: Translation with system prompt
                value:
                  messages:
                    - role: user
                      content:
                        - type: text
                          text: Translate hello to German
                  system: You are a professional English to German translator
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                required:
                  - messages
                  - system
                  - usage
                  - variable_values
                properties:
                  messages:
                    type: array
                    description: >
                      The templatized prompt with variable placeholders.

                      The response includes the input messages with specific
                      values replaced by variable placeholders. These messages
                      maintain the original message structure but contain
                      uppercase variable names in place of concrete values.
                    items:
                      type: object
                      required:
                        - role
                        - content
                      properties:
                        role:
                          type: string
                          enum:
                            - user
                            - assistant
                          description: The role of the message sender
                        content:
                          type: array
                          description: The content of the message with variables templated
                          items:
                            type: object
                            required:
                              - type
                              - text
                            properties:
                              type:
                                type: string
                                enum:
                                  - text
                                description: The type of content block
                              text:
                                type: string
                                description: >-
                                  The text content with template variables
                                  (e.g., "{{VARIABLE_NAME}}")
                  system:
                    type: string
                    description: >
                      The input system prompt with variables identified and
                      replaced.

                      If no system prompt was provided in the original request,
                      this field will be an empty string.
                    example: >-
                      You are a professional English to {{TARGET_LANGUAGE}}
                      translator
                  usage:
                    type: object
                    description: Usage information
                    required:
                      - input_tokens
                      - output_tokens
                    properties:
                      input_tokens:
                        type: integer
                        description: Number of input tokens used
                        minimum: 0
                      output_tokens:
                        type: integer
                        description: Number of output tokens generated
                        minimum: 0
                  variable_values:
                    type: object
                    description: >
                      A mapping of template variable names to their original
                      values, as extracted from the input prompt during
                      templatization. Each key represents a variable name
                      identified in the templatized prompt, and each value
                      contains the corresponding content from the original
                      prompt that was replaced by that variable.
                    additionalProperties:
                      type: string
                    example:
                      WORD_TO_TRANSLATE: hello
                      TARGET_LANGUAGE: German
              examples:
                templatized_translation:
                  summary: Templatized translation prompt
                  value:
                    messages:
                      - role: user
                        content:
                          - type: text
                            text: >-
                              Translate {{WORD_TO_TRANSLATE}} to
                              {{TARGET_LANGUAGE}}
                    system: >-
                      You are a professional English to {{TARGET_LANGUAGE}}
                      translator
                    usage:
                      input_tokens: 15
                      output_tokens: 25
                    variable_values:
                      WORD_TO_TRANSLATE: hello
                      TARGET_LANGUAGE: German
        '400':
          description: Bad Request - Invalid input parameters or unsupported content types
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized - Invalid or missing API key
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden - Access denied or not in closed research preview
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: x-api-key
      description: API key for authentication
  schemas:
    Error:
      type: object
      required:
        - type
        - message
      properties:
        type:
          type: string
          description: The type of error
          example: invalid_request_error
        message:
          type: string
          description: A human-readable error message
          example: Invalid request format
tags:
  - name: Prompt Generation
    description: APIs for generating and improving prompts
  - name: Prompt Improvement
    description: APIs for enhancing existing prompts with feedback
  - name: Prompt Templatization
    description: APIs for converting prompts into reusable templates with variables
